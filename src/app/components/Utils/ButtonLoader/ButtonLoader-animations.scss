@import "~BaseAlias/styles/easings";

.buttonLoader {
	&__spinner {
		$easing: cubic-bezier(0.8, 0, 0.4, 0.8);

		$speed: 1150ms; // animation time for each loop
		$color: white; // Blue A200 in the Material Design color palette
		$linecap: round; // could be 'round', but the official one is square
		$loops: 2; // number of points where the arc meets
		$arc: 0.85; // fraction of the circumference that the arc grows to
		$perimeter: 26px * 3.14159265358979; // circumference of the raw svg inner cricle

		// measure to prevent inline block spacing from affecting the outer rotation
		font-size: 0;

		display: inline-block;
		animation: outer $speed * $loops linear infinite;

		svg {
			animation: inner $speed linear infinite;

			circle {
				fill: none;
				stroke: $color;
				stroke-linecap: $linecap;
				animation: arc $speed $easing infinite;
			}
		}

		@keyframes outer {
			0% {
				transform: rotate(0);
			}
			100% {
				transform: rotate(360deg);
			}
		}

		@keyframes inner {
			0% {
				transform: rotate(-360deg);
			}
			100% {
				transform: rotate(0);
			}
		}

		@keyframes arc {
			0% {
				stroke-dasharray: 1 $perimeter;
				stroke-dashoffset: 0;
			}
			40% {
				stroke-dasharray: $arc * $perimeter, $perimeter;
				stroke-dashoffset: 0;
			}
			100% {
				stroke-dasharray: 1 $perimeter;
				stroke-dashoffset: -$arc * $perimeter;
			}
		}
	}

	// Spinner
	&__spinner {
		position: relative;
		pointer-events: none;

		top: 50px;
		opacity: 0;

		// When exiting
		transition: top 5s $easeOutExpo 0s, opacity 0.3s $easeOutQuad 0s;

		&.is--loading {
			opacity: 1;
			top: 0;

			// When entering
			transition: top 1.2s $easeOutExpo 0.25s, opacity 0.45s $easeInQuart 0.25s;
		}
	}

	// Label
	&__label {
		transition-duration: 0.4s;
		transition-timing-function: $easeOutExpo;
		transform: scale(1);
		transition-delay: 0.2s;

		&.is--loading {
			transform: scale(0);
			transition-delay: 0.2s;
		}
	}
}
